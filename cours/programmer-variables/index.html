<!doctype html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    

    <link href="http://prof.bpesquet.fr/vendor/bootstrap-3.1.1/css/bootstrap.min.css" rel="stylesheet">
    <link href="http://prof.bpesquet.fr/vendor/font-awesome-4.1.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="http://prof.bpesquet.fr/vendor/highlight.js/styles/monokai.css" rel="stylesheet">
    <link href="http://prof.bpesquet.fr/styles/style.css" rel="stylesheet">

    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-39897312-3', 'auto');
        ga('send', 'pageview');
    </script>

    <link rel="shortcut icon" href="http://prof.bpesquet.fr/images/bpesquet.ico">

    <title>Programmer avec des variables</title>
</head>
<body data-spy="scroll" data-target="#TableOfContents">
    <nav class="navbar navbar-default navbar-fixed-top navbar-inverse" role="navigation">
        <div class="container">
            <div class="navbar-header">
                
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="http://prof.bpesquet.fr/">
                    <span class="glyphicon glyphicon-home"></span>
                </a>
            </div>

            <div class="collapse navbar-collapse nav-collapse">
                <ul class="nav navbar-nav">
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Ressources <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li><a href="http://prof.bpesquet.fr/livre/">Livres</a></li>
                            <li><a href="http://prof.bpesquet.fr/cours/">Cours</a></li>
                            <li><a href="http://prof.bpesquet.fr/tutoriel/">Tutoriels</a></li>
                            <li><a href="http://prof.bpesquet.fr/activite/">Activités</a></li>
                            <li><a href="http://prof.bpesquet.fr/article/">Articles</a></li>
                        </ul>
                    </li>
                    <li><a href="http://prof.bpesquet.fr/avancement/">Avancements</a></li>
                </ul>
                <ul class="nav navbar-nav navbar-right">
                    <li><a href="mailto:bpesquet@gmail.com" title="Contact"><i class="fa fa-envelope"></i></a></li>
                    <li><a href="https://twitter.com/bpesquet" title="Twitter"><i class="fa fa-twitter"></i></a></li>
                    <li><a href="https://plus.google.com/110003637459679741050?rel=author"><i class="fa fa-google-plus" title="Google+"></i></a></li>
                    <li><a href="https://github.com/bpesquet" title="GitHub"><i class="fa fa-github"></i></a></li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container">

<div class="row">

    <div class="col-md-9">
        <h1 class="pageTitle">Programmer avec des variables</h1>
        

<p>L&rsquo;objectif de ce chapitre est de découvrir comment utiliser des variables dans un programme.</p>

<h1 id="toc_0">Le programme d&rsquo;exemple</h1>

<p>Le programme d&rsquo;exemple du chapitre précédent était simpliste. Enrichissons-le en permettant à l&rsquo;utilisateur de saisir le montant hors taxes et en lui affichant le résultat du calcul.</p>

<pre><code>string msg = &quot;Bienvenue dans l'application TVA !&quot;;
Console.WriteLine(msg);

// Saisie et conversion du montant hors taxes
Console.Write(&quot;Entrez un montant HT : &quot;);
string saisie = Console.ReadLine();
double montantHT = Convert.ToDouble(saisie);

// Définition du taux de TVA à 20,6%
double tauxTVA = 0.206;

// Calcul du montant T.T.C.
double montantTTC = montantHT * (1 + tauxTVA);

// Affichage du montant converti
string sortie = &quot;Le montant TTC est de &quot; + montantTTC;
Console.WriteLine(sortie);

Console.WriteLine(&quot;Merci d'avoir utilisé l'application. Au revoir !&quot;);
</code></pre>

<p>Voici le résultat de son exécution sous la forme d&rsquo;une application console.</p>

<p><img src="http://prof.bpesquet.fr/images/content/calcul_tva.jpg" class="content centered bordered" alt="calcul_tva.jpg" /></p>

<h1 id="toc_1">Chaînes de caractères</h1>

<h2 id="toc_2">Création d&rsquo;une chaîne de caractères</h2>

<p>Une chaîne de caractères (en anglais <code>string</code>) représente un ensemble de caractères. Un caractère correspond <em>grosso modo</em> à ce qu&rsquo;on peut obtenir en tapant sur une touche d&rsquo;un clavier : une lettre, un chiffre, un espace, un signe de ponctuation, un symbole comme $ ou µ.</p>

<p>En programmation, on matérialise le début et la fin d&rsquo;une chaîne de caractères avec des <strong>guillemets doubles</strong> (caractère <code>&quot;</code>).</p>

<pre><code>string msg = &quot;Bienvenue dans l'application TVA !&quot;;
</code></pre>

<h1 id="toc_3">Concaténation de chaînes</h1>

<p>Il est possible de créer une chaîne de caractères par assemblage d&rsquo;autres chaînes. Cette opération s&rsquo;appelle la <strong>concaténation</strong>. En C#, elle est réalisée au moyen de l&rsquo;opérateur <code>+</code>.</p>

<pre><code>string msg = &quot;Bienvenue&quot;;
msg = msg + &quot; en&quot;;
msg += &quot; BTS SIO !&quot;;
</code></pre>

<p>Ici, la valeur finale de la variable <em>msg</em> sera <em>Bienvenue en BTS SIO !</em>. L&rsquo;opérateur <code>+=</code> est un raccourci : écrire <code>variable += valeur</code> équivaut exactement à écrire <code>variable = variable + valeur</code>, en plus concis.</p>

<h1 id="toc_4">Affichage à l&rsquo;écran</h1>

<p>L&rsquo;instruction C# <code>Console.WriteLine</code> permet d&rsquo;écrire à l&rsquo;écran le texte qui la suit entre parenthèses.</p>

<pre><code>string msg = &quot;Bienvenue dans l'application TVA !&quot;;
Console.WriteLine(msg);
</code></pre>

<p>Le texte à afficher est fourni sous la forme d&rsquo;une chaîne de caractères : soit une variable de type <code>string</code>, soit directement un texte entre guillemets.</p>

<pre><code>Console.WriteLine(&quot;Merci d'avoir utilisé l'application. Au revoir !&quot;);
</code></pre>

<h1 id="toc_5">Saisie d&rsquo;informations</h1>

<p>L&rsquo;instruction C# <code>Console.ReadLine</code> permet d&rsquo;attendre le résultat de la saisie utilisateur au clavier. Ici, son résultat est affecté à la variable nommée <code>saisie</code>, qui est de type <code>string</code>.</p>

<pre><code>// ...
string saisie = Console.ReadLine();
</code></pre>

<div class="alert">
    <strong>Remarque</strong>
    <p><p><code>Console.ReadLine</code> renvoit toujours une valeur de type <code>string</code>, même si l&rsquo;utilisateur saisit une valeur compatible avec un autre type, comme un entier.</p>
</p>
</div>
  

<h1 id="toc_6">Conversion de type</h1>

<h2 id="toc_7">Conversion explicite</h2>

<p>Nous avons vu précédemment que des variables devaient être de type numérique pour pouvoir être utilisées dans des calculs. Cependant, l&rsquo;instruction <code>Console.ReadLine</code> renvoit toujours une chaîne de caractères (<code>string</code>). Le langage C# permet heureusement de convertir cette chaîne en une valeur numérique.</p>

<pre><code>// ...
string saisie = Console.ReadLine();
double montantHT = Convert.ToDouble(saisie);  // conversion explicite
</code></pre>

<p>L&rsquo;instruction C# <code>Convert.ToDouble</code> permet de passer d&rsquo;une valeur de type <code>string</code> (ici la variable <code>saisie</code>) à un résultat de type <code>double</code>, affecté ici à la variable <code>montantHT</code>. Il s&rsquo;agit d&rsquo;une conversion de type expressément demandée par le programmeur, ou conversion <strong>explicite</strong>.</p>

<h1 id="toc_8">Conversion implicite</h1>

<p>Dans certaines situations, le langage C# peut automatiser la conversion de type sans intervention du programmeur. On parle alors de conversion <strong>implicite</strong>.</p>

<pre><code>// ...
double montantTTC = montantHT * (1 + tauxTVA);
string sortie = &quot;Le montant TTC est de &quot; + montantTTC;  // conversion implicite
Console.WriteLine(sortie);
</code></pre>

<p>Ici, une conversion implicite de la variable <code>montantTTC</code> (de type <code>double</code>) vers le type <code>string</code> a lieu avant la concaténation. Il est même possible d&rsquo;être encore plus concis.</p>

<pre><code>// ...
double montantTTC = montantHT * (1 + tauxTVA);
Console.WriteLine(&quot;Le montant TTC est de &quot; + montantTTC);  // conversion implicite
</code></pre>

<p>Les principales conversions implicites concernent :</p>

<ul>
<li>les conversions d&rsquo;un type numérique (<code>int</code>, <code>double</code>) vers le type <code>string</code>.</li>
<li>les conversion d&rsquo;un type numérique vers un autre type numérique capable de stocker l&rsquo;information sans perte.</li>
</ul>

<p></p>

<pre><code>int a = 3;
double b = a;  // OK, un réel peut stocker une valeur entière
int c = b;     // erreur : un entier ne peut pas stocker une valeur réelle
</code></pre>

<h1 id="toc_9">Erreurs fréquentes</h1>

<h2 id="toc_10">Redéclaration d&rsquo;une variable</h2>

<p>Au sein d&rsquo;une même unité de code source, deux variables différentes ne peuvent pas porter le même nom. En C#, une unité de code source est la zone délimitée par une paire d&rsquo;accolades ouvrantes et fermantes.</p>

<p>Une erreur fréquente consiste à redéclarer la variable qu&rsquo;on souhaite simplement réutiliser. Cela provoque une erreur, comme dans l&rsquo;exemple ci-dessous.</p>

<pre><code>// ...
double montantHT = 0;
// ...
double montantHT = 150;  // Erreur : redéclaration de la variable montantHT !
</code></pre>

<p>Comme la plupart des langages, le C# fait la distinction entre les minuscules et les majuscules dans les noms des variables. On dit qu&rsquo;il est <strong>sensible à la casse</strong> (<em>case sensitive</em>).</p>

<pre><code>// ...
double montantHT = 0;
// ...
double montantHt = 150;  // OK : déclaration d'une nouvelle variable montantHt
</code></pre>

<h2 id="toc_11">Utilisation d&rsquo;une variable non initialisée</h2>

<p>Le langage C# interdit l&rsquo;utilisation d&rsquo;une variable tant qu&rsquo;une valeur ne lui a pas été affectée.</p>

<pre><code>double a;
double b = a;  // erreur : a n'a pas de valeur
</code></pre>

<h2 id="toc_12">Mauvaise utilisation des guillemets</h2>

<p>Dans un programme C#, tout ce qui se trouve à l&rsquo;intérieur d&rsquo;une paire de guillemets est considéré comme une chaîne de caractères. Il faut donc être attentif au placement des guillemets, puisque le typage des variables interdit de leur affecter une valeur incompatible avec leur type.</p>

<pre><code>double val = 20.6;    // OK
double val = &quot;20.6&quot;;  // erreur : &quot;19.6&quot; est une valeur de type string

string msg = &quot;3.14&quot;;  // OK
string msg = 3.14;    // erreur : 3.14 est une valeur de type réel
</code></pre>

<h2 id="toc_13">Confusion entre concaténation et addition</h2>

<p>L&rsquo;opérateur <code>+</code> a un sens différent selon le type de ses arguments :</p>

<ul>
<li>appliqué à des entiers ou des réels, il exprime l&rsquo;addition mathématique.</li>
<li>appliqué à des chaînes de caractères, il permet de les concaténer en une seule chaîne.</li>
</ul>

<p></p>

<pre><code>int x = 421;
int y = 9;
int z = x + y;         // après l'exécution, la variable z vaut 430

string a = &quot;421&quot;;
string b = &quot;9&quot;;
string c = a + b;      // après l'exécution, la variable c vaut &quot;4219&quot;
string d = &quot;a + b&quot;;    // après l'exécution, la variable d vaut &quot;a + b&quot;
string e = &quot;a&quot; + &quot;b&quot;;  // après l'exécution, la variable e vaut &quot;ab&quot;
</code></pre>

<h2 id="toc_14">Chaîne de caractères vide</h2>

<p>Une variable de type <code>string</code> possède une &ldquo;valeur&rdquo; initiale particulière : <code>null</code>. Il s&rsquo;agit plutôt d&rsquo;un mot-clé qui signifie : absence de valeur. Il ne faut pas le confondre avec la chaîne vide (<code>&quot;&quot;</code>).</p>

<pre><code>string msg1;        // msg1 n'a pas de valeur
string msg2 = &quot;&quot;;   // la valeur de msg2 est &quot;&quot;
</code></pre>

        <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'bpesquet';
    var disqus_identifier = 'http:\/\/prof.bpesquet.fr\/cours\/programmer-variables';
    var disqus_title = 'Programmer avec des variables';
    var disqus_url = 'http:\/\/prof.bpesquet.fr\/cours\/programmer-variables';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </div>
    <div class="col-md-3">
        <nav id="TableOfContents">
<ul>
<li><a href="#toc_0">Le programme d&rsquo;exemple</a></li>
<li><a href="#toc_1">Chaînes de caractères</a>
<ul>
<li><a href="#toc_2">Création d&rsquo;une chaîne de caractères</a></li>
</ul></li>
<li><a href="#toc_3">Concaténation de chaînes</a></li>
<li><a href="#toc_4">Affichage à l&rsquo;écran</a></li>
<li><a href="#toc_5">Saisie d&rsquo;informations</a></li>
<li><a href="#toc_6">Conversion de type</a>
<ul>
<li><a href="#toc_7">Conversion explicite</a></li>
</ul></li>
<li><a href="#toc_8">Conversion implicite</a></li>
<li><a href="#toc_9">Erreurs fréquentes</a>
<ul>
<li><a href="#toc_10">Redéclaration d&rsquo;une variable</a></li>
<li><a href="#toc_11">Utilisation d&rsquo;une variable non initialisée</a></li>
<li><a href="#toc_12">Mauvaise utilisation des guillemets</a></li>
<li><a href="#toc_13">Confusion entre concaténation et addition</a></li>
<li><a href="#toc_14">Chaîne de caractères vide</a></li>
</ul></li>
</ul>
</nav>
    </div>

</div>

    </div> 

    <footer class="footer">
        <div class="container">
            <p class="pull-right">
                Créé avec <a href="http://hugo.spf13.com">Hugo</a> et <a href="http://getbootstrap.com">Bootstrap</a>.
            </p>
            <p>
                <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/fr/"><img src="http://prof.bpesquet.fr/images/by-nc-sa.png" alt="Creative Commons logo" /></a>
            </p>
        </div>
    </footer>

    <script src="http://prof.bpesquet.fr/vendor/jquery-1.11.1/jquery.min.js"></script>
    <script src="http://prof.bpesquet.fr/vendor/bootstrap-3.1.1/js/bootstrap.min.js"></script>
    <script src="http://prof.bpesquet.fr/vendor/highlight.js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <script>
        
        $("img").addClass("img-responsive");
        
        
        $("table").addClass("table");
        
        
        $("#TableOfContents ul").addClass("nav");
        $("#TableOfContents > ul").addClass("sidenav");
        $("#TableOfContents").affix();

        
        
        window.addEventListener("hashchange", function() { scrollBy(0, -60) });
    </script>
</body>
</html>
