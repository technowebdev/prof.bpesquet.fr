<!doctype html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    

    <link href="http://prof.bpesquet.fr/vendor/bootstrap-3.1.1/css/bootstrap.min.css" rel="stylesheet">
    <link href="http://prof.bpesquet.fr/vendor/font-awesome-4.1.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="http://prof.bpesquet.fr/vendor/highlight.js/styles/monokai.css" rel="stylesheet">
    <link href="http://prof.bpesquet.fr/styles/style.css" rel="stylesheet">

    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-39897312-3', 'auto');
        ga('send', 'pageview');
    </script>

    <link rel="shortcut icon" href="http://prof.bpesquet.fr/images/bpesquet.ico">

    <title>Passage de paramètres</title>
</head>
<body data-spy="scroll" data-target="#TableOfContents">
    <nav class="navbar navbar-default navbar-fixed-top navbar-inverse" role="navigation">
        <div class="container">
            <div class="navbar-header">
                
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="http://prof.bpesquet.fr/">
                    <span class="glyphicon glyphicon-home"></span>
                </a>
            </div>

            <div class="collapse navbar-collapse nav-collapse">
                <ul class="nav navbar-nav">
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Ressources <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li><a href="http://prof.bpesquet.fr/livre/">Livres</a></li>
                            <li><a href="http://prof.bpesquet.fr/cours/">Cours</a></li>
                            <li><a href="http://prof.bpesquet.fr/tutoriel/">Tutoriels</a></li>
                            <li><a href="http://prof.bpesquet.fr/activite/">Activités</a></li>
                            <li><a href="http://prof.bpesquet.fr/article/">Articles</a></li>
                        </ul>
                    </li>
                    <li><a href="http://prof.bpesquet.fr/avancement/">Avancements</a></li>
                </ul>
                <ul class="nav navbar-nav navbar-right">
                    <li><a href="mailto:bpesquet@gmail.com" title="Contact"><i class="fa fa-envelope"></i></a></li>
                    <li><a href="https://twitter.com/bpesquet" title="Twitter"><i class="fa fa-twitter"></i></a></li>
                    <li><a href="https://plus.google.com/110003637459679741050?rel=author"><i class="fa fa-google-plus" title="Google+"></i></a></li>
                    <li><a href="https://github.com/bpesquet" title="GitHub"><i class="fa fa-github"></i></a></li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container">

<div class="row">

    <div class="col-md-9">
        <h1 class="pageTitle">Passage de paramètres</h1>
        

<p>L&rsquo;objectif de ce chapitre est d&rsquo;apprendre à échanger des données avec un sous-programme.</p>

<h1 id="toc_0">Introduction</h1>

<h2 id="toc_1">Intérêt du passage de paramètres</h2>

<p>Supposons qu&rsquo;on souhaite écrire un programme qui dise bonjour à son utilisateur dans différentes langues. Une première solution consiste à écrire un sous-programme par langue.</p>

<pre><code>static void Main(string[] args)
{
    DireBonjour();
    SayHello();
    DecirHola();
}

static void DireBonjour()
{
    Console.WriteLine(&quot;Bonjour !&quot;);
}

static void SayHello()
{
    Console.WriteLine(&quot;Hello !&quot;);
}

static void DecirHola()
{
    Console.WriteLine(&quot;Hola !&quot;);
}
</code></pre>

<p>Cette solution n&rsquo;est pas très satisfaisante : même s&rsquo;il se limite ici à une ligne, le code d&rsquo;affichage est dupliqué dans tous les sous-programmes. Il serait préférable de <strong>centraliser</strong> cette opération dans un seul sous-programme, en faisant changer uniquement le message affiché.</p>

<p>Jusqu&rsquo;à présent, la seule solution que nous connaissons pour échanger des données entre le programme principal et le sous-programme repose sur l&rsquo;utilisation de variables globales.</p>

<pre><code>static string messageBonjour;

static void Main(string[] args)
{
     messageBonjour = &quot;Bonjour !&quot;;
     DireBonjour();
     messageBonjour = &quot;Hello !&quot;;
     DireBonjour();
     messageBonjour = &quot;Hola !&quot;;
     DireBonjour();
}

static void DireBonjour()
{
     Console.WriteLine(messageBonjour);
}
</code></pre>

<p>Le code d&rsquo;affichage est centralisé, ce qui est un progrès par rapport à la solution précédente. Cependant, le sous-programme <code>DireBonjour</code> ne peut plus fonctionner si une variable globale nommée <code>messageBonjour</code> n&rsquo;est pas déclarée et affectée à la bonne valeur avant chaque appel. Cela limite la <strong>modularité</strong> du code et la réutilisation du sous-programme dans un autre contexte.</p>

<p>On aimerait pouvoir écrire un sous-programme qui puisse échanger des informations avec le programme appelant tout en restant indépendant. Une solution existe : le passage de paramètres.</p>

<h2 id="toc_2">Un premier exemple</h2>

<p>Voici une adaptation du contexte précédent.</p>

<pre><code>static void Main(string[] args)
{
    string messageBonjour = &quot;Bonjour !&quot;;
    DireBonjour(messageBonjour);

    messageBonjour = &quot;Hello !&quot;;
    DireBonjour(messageBonjour);

    messageBonjour = &quot;Hola !&quot;;
    DireBonjour(messageBonjour);
}

static void DireBonjour(string message)  // message est un paramètre de DireBonjour
{
    Console.WriteLine(message);
}
</code></pre>

<p><img src="http://prof.bpesquet.fr/images/content/passage_parametre.jpg" class="content centered bordered" alt="passage_parametre.jpg" /></p>

<p>La définition du sous-programme comporte de nouveaux éléments. Elle inclut à présent un <strong>paramètre</strong> nommé <code>message</code> dont le type est <code>string</code>. A l&rsquo;intérieur du sous-programme, <code>message</code> est utilisée comme une variable locale classique. Mais <code>message</code> n&rsquo;est déclarée nulle part. Il s&rsquo;agit d&rsquo;une variable fictive appelée parfois variable formelle ou encore paramètre formel.</p>

<div class="alert alert-info">
    <strong>Définition</strong>
    <p><p>On appelle <strong>paramètre</strong> une donnée attendue par un
sous-programme qui doit lui être fournie lors de chaque appel. La liste
des paramètres d&rsquo;un sous-programme est définie entre parenthèses après
le nom du sous-programme.</p>
</p>
</div>

<p>Au moment de l&rsquo;appel du sous-programme <code>DireBonjour</code>, le paramètre <code>message</code> prend la valeur de la variable utilisée dans l&rsquo;appel, c&rsquo;est-à-dire <code>messageBonjour</code>. Puisque la variable <code>messageBonjour</code> est celle dont la valeur est concrètement utilisée, elle est appelée paramètre effectif du sous-programme ou encore <strong>argument</strong>.</p>

<div class="alert alert-info">
    <strong>Définition</strong>
    <p><p>On appelle <strong>argument</strong> la valeur fournie pour un paramètre au moment d&rsquo;un appel du sous-programme.</p>
</p>
</div>

<p>A présent, le sous-programme <code>DireBonjour</code> n&rsquo;est plus lié au programme appelant. On pourrait très bien le recopier tel quel dans un autre programme.</p>

<h2 id="toc_3">Fonctionnement du passage de paramètres</h2>

<p>L&rsquo;ajout de <strong>paramètres</strong> à un sous-programme permet d&rsquo;échanger des données avec le programme appelant, tout en maintenant le sous-programme indépendant (ce qui n&rsquo;est plus le cas quand le sous-programme utilise des variables globales).</p>

<p>Au moment de l&rsquo;appel au sous-programme, la valeur des données utilisés pour l&rsquo;appel, appelées <strong>arguments</strong> (paramètres effectifs), est affectée aux <strong>paramètres</strong> (formels) du sous-programme. A l&rsquo;intérieur d&rsquo;un sous-programme, un paramètre se comporte comme une variable locale.</p>

<div class="alert">
    <strong>Remarque</strong>
    <p><p>Les paramètres et les arguments peuvent avoir des <strong>noms</strong> différents mais doivent partager le même <strong>type</strong>.</p>
</p>
</div>

<h2 id="toc_4">Possibilités d&rsquo;utilisation</h2>

<p>Un sous-programme peut comporter les mêmes éléments qu&rsquo;un programme classique : tests, boucles, etc. Il peut être appelé plusieurs fois depuis le programme principal. A chaque appel, les paramètres prennent la valeur des arguments pendant l&rsquo;exécution du sous-programme. Voici un nouvel exemple.</p>

<pre><code>static void Main(string[] args)
{
     int nb1 = 6;
     int nb2 = 4;
     AfficherMax(nb1, nb2);   // 1er appel
     AfficherMax(2, 9);       // 2ème appel
     AfficherMax(nb1, nb1);   // 3ème appel
}

static void AfficherMax(int x, int y)
{
    if (x &gt; y)
    {
        Console.WriteLine(x + &quot; est plus grand que &quot; + y);
    }
    else
    {
        if (x &lt; y)
            Console.WriteLine(x + &quot; est plus petit que &quot; + y);
        else
            Console.WriteLine(x + &quot; et &quot; + y + &quot; sont égaux&quot;);
    }
}
</code></pre>

<p><img src="http://prof.bpesquet.fr/images/content/afficher_max.jpg" class="content centered bordered" alt="afficher_max.jpg" /></p>

<p>Le tableau ci-dessous rassemble les informations sur les différents appels du sous-programme.</p>

<table>
<thead>
<tr>
<th>Appel</th>
<th>Valeur de x</th>
<th>Valeur de y</th>
<th>Message affiché</th>
</tr>
</thead>

<tbody>
<tr>
<td>1er appel</td>
<td>6</td>
<td>4</td>
<td>6 est plus grand que 4</td>
</tr>

<tr>
<td>2ème appel</td>
<td>2</td>
<td>9</td>
<td>2 est plus petit que 9</td>
</tr>

<tr>
<td>3ème appel</td>
<td>6</td>
<td>6</td>
<td>6 et 6 sont égaux</td>
</tr>
</tbody>
</table>

<h1 id="toc_5">Aspects avancés</h1>

<h2 id="toc_6">Mode de passage des paramètres</h2>

<p>L&rsquo;exemple suivant va nous permettre de découvrir un aspect délicat du passage de paramètres.</p>

<pre><code>static void Main(string[] args)
{
    int x = 6;
    AugmenterDeUn(x);
    Console.WriteLine(&quot;Programme principal : x vaut &quot; + x);
}

static void AugmenterDeUn(int y)
{
    y = y + 1;
    Console.WriteLine(&quot;Sous-programme : y vaut &quot; + y);
}
</code></pre>

<p><img src="http://prof.bpesquet.fr/images/content/augmenter_de_un.jpg" class="content centered bordered" alt="augmenter_de_un.jpg" /></p>

<p>Pour comprendre ce résultat, il faut savoir que lorsqu&rsquo;une variable est passée en paramètre à un sous-programme, la valeur de l&rsquo;argument est <strong>copiée</strong> dans un nouvel emplacement mémoire correspondant au paramètre. La même valeur (ici <em>6</em>) est donc stockée à <em>deux</em> emplacements mémoire différents, celui de l&rsquo;argument <em>x</em> et celui du paramètre <em>y</em>. Toute modification du paramètre dans le sous-programme n&rsquo;a aucun impact sur la valeur de l&rsquo;argument dans le programme principal.</p>

<p>On appelle <strong>passage par valeur</strong> ce mode de passage des paramètres. C&rsquo;est le mode par défaut en C#, ainsi qu&rsquo;en Java.</p>

<h2 id="toc_7">Nommage des paramètres</h2>

<p>L&rsquo;exemple ci-dessous va illustrer une subtilité liée au nommage des paramètres d&rsquo;un sous-programme.</p>

<pre><code>static void Main(string[] args)
{
    int x = 6;
    AugmenterD Un(x);
    Console.WriteLine(&quot;Programme principal : x vaut &quot; + x);
}

static void AugmenterDeUn(int x)
{
    x = x + 1;
    Console.WriteLine(&quot;Sous-programme : x vaut &quot; + x);
}
</code></pre>

<p>}</p>

<p>Il s&rsquo;agit du même exemple que précédemment, à une différence près : le paramètre du sous-programme a été renommé et porte le même nom que l&rsquo;argument du programme principal.</p>

<p>Ce programme est compilable sans erreur et son exécution donne le résultat ci-dessous.</p>

<p><img src="http://prof.bpesquet.fr/images/content/nommage_parametre.jpg" class="content centered bordered" alt="nommage_parametre.jpg" /></p>

<p>Ce résultat s&rsquo;explique exactement de la même manière que le précédent : au moment de l&rsquo;appel, la valeur de l&rsquo;argument est copiée dans la zone mémoire du paramètre. La modification au niveau du sous-programme n&rsquo;a donc pas d&rsquo;effet sur la variable du programme principal. La seule différence concerne ici le programmeur, et non la machine : paramètre et argument portent le même nom <em>x</em>, ce qui ne provoque pas d&rsquo;erreur mais affecte la lisibilité du code, surtout pour un programmeur débutant.</p>

<div class="alert alert-success">
    <strong>Conseil</strong>
    <p><p>En phase d&rsquo;apprentissage, il est conseillé de donner aux arguments des noms différents de ceux des paramètres.</p>
</p>
</div>

        <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'bpesquet';
    var disqus_identifier = 'http:\/\/prof.bpesquet.fr\/cours\/passage-parametres';
    var disqus_title = 'Passage de paramètres';
    var disqus_url = 'http:\/\/prof.bpesquet.fr\/cours\/passage-parametres';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </div>
    <div class="col-md-3">
        <nav id="TableOfContents">
<ul>
<li><a href="#toc_0">Introduction</a>
<ul>
<li><a href="#toc_1">Intérêt du passage de paramètres</a></li>
<li><a href="#toc_2">Un premier exemple</a></li>
<li><a href="#toc_3">Fonctionnement du passage de paramètres</a></li>
<li><a href="#toc_4">Possibilités d&rsquo;utilisation</a></li>
</ul></li>
<li><a href="#toc_5">Aspects avancés</a>
<ul>
<li><a href="#toc_6">Mode de passage des paramètres</a></li>
<li><a href="#toc_7">Nommage des paramètres</a></li>
</ul></li>
</ul>
</nav>
    </div>

</div>

    </div> 

    <footer class="footer">
        <div class="container">
            <p class="pull-right">
                Créé avec <a href="http://hugo.spf13.com">Hugo</a> et <a href="http://getbootstrap.com">Bootstrap</a>.
            </p>
            <p>
                <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/fr/"><img src="http://prof.bpesquet.fr/images/by-nc-sa.png" alt="Creative Commons logo" /></a>
            </p>
        </div>
    </footer>

    <script src="http://prof.bpesquet.fr/vendor/jquery-1.11.1/jquery.min.js"></script>
    <script src="http://prof.bpesquet.fr/vendor/bootstrap-3.1.1/js/bootstrap.min.js"></script>
    <script src="http://prof.bpesquet.fr/vendor/highlight.js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <script>
        
        $("img").addClass("img-responsive");
        
        
        $("table").addClass("table");
        
        
        $("#TableOfContents ul").addClass("nav");
        $("#TableOfContents > ul").addClass("sidenav");
        $("#TableOfContents").affix();

        
        
        window.addEventListener("hashchange", function() { scrollBy(0, -60) });
    </script>
</body>
</html>
