<!doctype html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    

    <link href="http://prof.bpesquet.fr/vendor/bootstrap-3.1.1/css/bootstrap.min.css" rel="stylesheet">
    <link href="http://prof.bpesquet.fr/vendor/font-awesome-4.1.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="http://prof.bpesquet.fr/vendor/highlight.js/styles/monokai.css" rel="stylesheet">
    <link href="http://prof.bpesquet.fr/styles/style.css" rel="stylesheet">

    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-39897312-3', 'auto');
        ga('send', 'pageview');
    </script>

    <link rel="shortcut icon" href="http://prof.bpesquet.fr/images/bpesquet.ico">

    <title>Accès aux données avec PHP</title>
</head>
<body data-spy="scroll" data-target="#TableOfContents">
    <nav class="navbar navbar-default navbar-fixed-top navbar-inverse" role="navigation">
        <div class="container">
            <div class="navbar-header">
                
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="http://prof.bpesquet.fr/">
                    <span class="glyphicon glyphicon-home"></span>
                </a>
            </div>

            <div class="collapse navbar-collapse nav-collapse">
                <ul class="nav navbar-nav">
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Ressources <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li><a href="http://prof.bpesquet.fr/livre/">Livres</a></li>
                            <li><a href="http://prof.bpesquet.fr/cours/">Cours</a></li>
                            <li><a href="http://prof.bpesquet.fr/tutoriel/">Tutoriels</a></li>
                            <li><a href="http://prof.bpesquet.fr/activite/">Activités</a></li>
                            <li><a href="http://prof.bpesquet.fr/article/">Articles</a></li>
                        </ul>
                    </li>
                    <li><a href="http://prof.bpesquet.fr/avancement/">Avancements</a></li>
                </ul>
                <ul class="nav navbar-nav navbar-right">
                    <li><a href="mailto:bpesquet@gmail.com" title="Contact"><i class="fa fa-envelope"></i></a></li>
                    <li><a href="https://twitter.com/bpesquet" title="Twitter"><i class="fa fa-twitter"></i></a></li>
                    <li><a href="https://plus.google.com/110003637459679741050?rel=author"><i class="fa fa-google-plus" title="Google+"></i></a></li>
                    <li><a href="https://github.com/bpesquet" title="GitHub"><i class="fa fa-github"></i></a></li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container">

<div class="row">

    <div class="col-md-9">
        <h1 class="pageTitle">Accès aux données avec PHP</h1>
        

<h1 id="toc_0">Contexte</h1>

<p>On vous fournit le script SQL suivant qui définit une liste de news.</p>

<pre><code>drop table if exists T_NEWS;
drop table if exists T_CATEGORIE;

create table T_CATEGORIE (
    CAT_ID integer primary key auto_increment,
    CAT_NOM varchar(100) not null
) ENGINE=INNODB CHARACTER SET utf8 COLLATE utf8_unicode_ci;

create table T_NEWS (
    NEWS_ID integer primary key auto_increment,
    NEWS_TITRE varchar(100) not null,
    NEWS_CONTENU varchar(500) not null,
    CAT_ID integer not null,
    constraint fk_news_cat foreign key(CAT_ID) references T_CATEGORIE(CAT_ID)
) ENGINE=INNODB CHARACTER SET utf8 COLLATE utf8_unicode_ci;

insert into T_CATEGORIE(CAT_NOM) values ('Développement');
insert into T_CATEGORIE(CAT_NOM) values ('Système');
insert into T_CATEGORIE(CAT_NOM) values ('Internet');

insert into T_NEWS(NEWS_TITRE, NEWS_CONTENU, CAT_ID) values
('Le meilleur langage pour le développement cross-platform est-il le C++ ?',
    'Lorsqu\’il s\’agit de développement mobile, les langages mis en avant pour la création d\’applications multiplateformes sont couramment HTML et JavaScript.
Pour le développement natif, en fonction des écosystèmes, les développeurs s\’orientent le plus souvent vers objective-c ou Java.
Pourtant, ceux qui cherchent à créer des applications cross-platform tout en bénéficiant d\’une approche efficace pour la réduction des coûts peuvent trouver leur bonheur au sein du C++.', 1);
insert into T_NEWS(NEWS_TITRE, NEWS_CONTENU, CAT_ID) values
('Bousculé par Google et Apple, Windows n\'anime plus qu\'un terminal sur cinq',
    'Si Windows  peut se vanter d\'être le système d\'exploitation le plus présent sur les PC, il n\'en n\'est plus de même lorsque les calculs comparent l\'ensemble des terminaux. Microsoft n\'arrive alors qu\'en troisième position après Google et Apple.', 2);
insert into T_NEWS(NEWS_TITRE, NEWS_CONTENU, CAT_ID) values
('Linux 3.7 sort en version stable', 
'Près de deux mois après la sortie du noyau Linux 3.6, Linus Torvalds annonce la publication de la version stable de Linux 3.7, avec un nombre important de nouvelles fonctionnalités : support de multiples plateformes ARM, améliorations de Btrfs, Ext4, TCP Fast Open et IPv6', 2);
</code></pre>

<h1 id="toc_1">Travail à réaliser</h1>

<h2 id="toc_2">Partie 1</h2>

<ul>
<li><p>Créez sous MySQL une base de données <code>mesnews</code> puis implantez-y le schéma relationnel et les données d&rsquo;exemple.</p></li>

<li><p>Créez l&rsquo;utilisateur MySQL <code>mesnews_user</code> avec le mot de passe <code>secret</code> et tous les droits sur la base <code>mesnews</code>.</p></li>

<li><p>Dans un dossier <code>MesNews</code> à créer sur votre serveur Web, écrivez la page PHP <code>index.php</code> qui récupère et affiche la liste des news issue de la base de données. Voici les contraintes techniques associées :</p>

<ul>
<li>La technologie de connexion à la BD doit être PDO.</li>
<li>L&rsquo;utilisateur MySQL employé pour se connecter à la BD depuis <code>index.php</code> doit être <code>mesnews_user</code> et non pas <code>root</code>.</li>
<li>Les balises HTML5 <code>&lt;header&gt;</code>, <code>&lt;article&gt;</code> et <code>&lt;footer&gt;</code> doivent être utilisées.</li>
</ul></li>
</ul>

<p></p>

<ul>
<li>Créez la feuille de style <code>mesnews.css</code> afin de parvenir au résultat ci-dessous.</li>
</ul>

<p><img src="http://prof.bpesquet.fr/images/content/mesnews.png" class="content centered" alt="mesnews.png" /></p>

<h2 id="toc_3">Partie 2</h2>

<ul>
<li><p>Ajoutez dans la page <code>index.php</code> (entre le titre et les articles) un lien vers <code>ajout.php</code>.</p></li>

<li><p>Dans votre dossier <code>MesNews</code>, écrivez la page PHP <code>ajout.php</code> qui affiche un formulaire permettant à l&rsquo;utilisateur de saisir les propriétés d&rsquo;une news. Voici les contraintes techniques associées :</p>

<ul>
<li>Le formulaire renvoie vers la page <code>ajout_post.php</code>.</li>
<li>Sa mise en forme est secondaire.</li>
<li>Les champs <strong>Titre</strong> et <strong>Contenu</strong> sont obligatoires.</li>
<li>La liste des catégories provient de la base de données.</li>
</ul></li>
</ul>

<p><img src="http://prof.bpesquet.fr/images/content/mesnews_ajout.png" class="content centered" alt="mesnews_ajout.png" /></p>

<ul>
<li>Dans votre dossier <code>MesNews</code>, écrivez la page PHP <code>ajout_post.php</code> qui utilise les données reçues du formulaire afin d&rsquo;ajouter une news dans la base de données. Elle affiche un message en fin d&rsquo;opération, ainsi qu&rsquo;un lien vers la page <code>index.php</code>.</li>
</ul>

<p><img src="http://prof.bpesquet.fr/images/content/mesnews_ajoutok.png" class="content centered" alt="mesnews_ajoutok.png" /></p>

        <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'bpesquet';
    var disqus_identifier = 'http:\/\/prof.bpesquet.fr\/activite\/acces-donnees-php';
    var disqus_title = 'Accès aux données avec PHP';
    var disqus_url = 'http:\/\/prof.bpesquet.fr\/activite\/acces-donnees-php';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </div>
    <div class="col-md-3">
        <nav id="TableOfContents">
<ul>
<li><a href="#toc_0">Contexte</a></li>
<li><a href="#toc_1">Travail à réaliser</a>
<ul>
<li><a href="#toc_2">Partie 1</a></li>
<li><a href="#toc_3">Partie 2</a></li>
</ul></li>
</ul>
</nav>
    </div>

</div>

    </div> 

    <footer class="footer">
        <div class="container">
            <p class="pull-right">
                Créé avec <a href="http://hugo.spf13.com">Hugo</a> et <a href="http://getbootstrap.com">Bootstrap</a>.
            </p>
            <p>
                <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/fr/"><img src="http://prof.bpesquet.fr/images/by-nc-sa.png" alt="Creative Commons logo" /></a>
            </p>
        </div>
    </footer>

    <script src="http://prof.bpesquet.fr/vendor/jquery-1.11.1/jquery.min.js"></script>
    <script src="http://prof.bpesquet.fr/vendor/bootstrap-3.1.1/js/bootstrap.min.js"></script>
    <script src="http://prof.bpesquet.fr/vendor/highlight.js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <script>
        
        $("img").addClass("img-responsive");
        
        
        $("table").addClass("table");
        
        
        $("#TableOfContents ul").addClass("nav");
        $("#TableOfContents > ul").addClass("sidenav");
        $("#TableOfContents").affix();

        
        
        window.addEventListener("hashchange", function() { scrollBy(0, -60) });
    </script>
</body>
</html>
